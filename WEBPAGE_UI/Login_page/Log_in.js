const translations = {
    en: {
        title: "Odisha Krishi Sahayak - Login",
        appTitle: "Odisha Krishi Sahayak",
        appTagline: "Your Partner in Farming",
        settingsBtn: "English",
        welcomeTitle: "Welcome to Odisha Krishi Sahayak",
        welcomeText: "Your digital partner for smarter farming. Get data-driven insights and AI-powered recommendations to maximize your crop yield.",
        featureAITitle: "AI-Powered Insights",
        featureAIText: "Get accurate predictions for crop yield and personalized recommendations.",
        featureIrrigationTitle: "Smart Irrigation",
        featureIrrigationText: "Optimize water usage with data-driven irrigation schedules.",
        featurePestTitle: "Pest Management",
        featurePestText: "Identify and manage pests with timely alerts and solutions.",
        loginTitle: "Login to Your Account",
        loginEmailLabel: "Email Address",
        loginEmailPlaceholder: "Enter your email",
        loginPasswordLabel: "Password",
        loginPasswordPlaceholder: "Enter your password",
        loginBtnText: "Sign In",
        toggleToRegister: "New User? Register here",
        registerTitle: "Create New Account",
        signupNameLabel: "Full Name",
        signupNamePlaceholder: "Enter your full name",
        signupEmailLabel: "Email Address",
        signupEmailPlaceholder: "Enter your email",
        signupPasswordLabel: "Password",
        signupPasswordPlaceholder: "Create a password",
        signupBtnText: "Create Account",
        toggleToLogin: "Already a user? Sign in here",
        footerText1: "Odisha Krishi Sahayak - Empowering Farmers with Data-Driven Insights",
        alertEmptyFields: "Please fill all fields",
        alertLoginFailed: "Login failed. Please check your credentials.",
        alertRegistrationSuccess: "Registration successful! You can now sign in.",
        alertRegistrationFailed: "Registration failed. Please try again.",
    },
    or: {
        title: "ଓଡ଼ିଶା କୃଷି ସହାୟକ - ଲଗଇନ",
        appTitle: "ଓଡ଼ିଶା କୃଷି ସହାୟକ",
        appTagline: "ଆପଣଙ୍କର କୃଷି ସାଥୀ",
        settingsBtn: "ଓଡ଼ିଆ",
        welcomeTitle: "ଓଡ଼ିଶା କୃଷି ସହାୟକକୁ ସ୍ୱାଗତ",
        welcomeText: "ଉନ୍ନତ ଚାଷ ପାଇଁ ଆପଣଙ୍କର ଡିଜିଟାଲ୍ ସାଥୀ। ଆପଣଙ୍କ ଫସଲ ଉତ୍ପାଦନକୁ ବଢାଇବା ପାଇଁ ତଥ୍ୟ-ଆଧାରିତ ସୂଚନା ଏବଂ AI-ଶକ୍ତିପ୍ରାପ୍ତ ପରାମର୍ଶ ପାଆନ୍ତୁ।",
        featureAITitle: "AI-ଶକ୍ତିପ୍ରାପ୍ତ ସୂଚନା",
        featureAIText: "ଫସଲ ଉତ୍ପାଦନ ଏବଂ ବ୍ୟକ୍ତିଗତ ପରାମର୍ଶ ପାଇଁ ସଠିକ୍ ଅନୁମାନ ପାଆନ୍ତୁ।",
        featureIrrigationTitle: "ସ୍ମାର୍ଟ ଜଳସେଚନ",
        featureIrrigationText: "ତଥ୍ୟ-ଆଧାରିତ ଜଳସେଚନ କାର୍ଯ୍ୟସୂଚୀ ସହିତ ଜଳ ବ୍ୟବହାରକୁ ସର୍ବାଧିକ କରନ୍ତୁ।",
        featurePestTitle: "କୀଟ ପରିଚାଳନା",
        featurePestText: "ସମୟାନୁସାରେ ସତର୍କତା ଏବଂ ସମାଧାନ ସହିତ କୀଟମାନଙ୍କୁ ଚିହ୍ନଟ ଏବଂ ପରିଚାଳନା କରନ୍ତୁ।",
        loginTitle: "ଆପଣଙ୍କ ଆକାଉଣ୍ଟକୁ ଲଗଇନ କରନ୍ତୁ",
        loginEmailLabel: "ଇମେଲ ଠିକଣା",
        loginEmailPlaceholder: "ଆପଣଙ୍କ ଇମେଲ୍ ପ୍ରବେଶ କରନ୍ତୁ",
        loginPasswordLabel: "ପାସୱାର୍ଡ",
        loginPasswordPlaceholder: "ଆପଣଙ୍କ ପାସୱାର୍ଡ ପ୍ରବେଶ କରନ୍ତୁ",
        loginBtnText: "ସାଇନ୍ ଇନ୍",
        toggleToRegister: "ନୂଆ ଉପଭୋକ୍ତା? ଏଠାରେ ପଞ୍ଜିକରଣ କରନ୍ତୁ",
        registerTitle: "ନୂଆ ଆକାଉଣ୍ଟ ତିଆରି କରନ୍ତୁ",
        signupNameLabel: "ପୂରା ନାମ",
        signupNamePlaceholder: "ଆପଣଙ୍କ ପୂରା ନାମ ପ୍ରବେଶ କରନ୍ତୁ",
        signupEmailLabel: "ଇମେଲ ଠିକଣା",
        signupEmailPlaceholder: "ଆପଣଙ୍କ ଇମେଲ୍ ପ୍ରବେଶ କରନ୍ତୁ",
        signupPasswordLabel: "ପାସୱାର୍ଡ",
        signupPasswordPlaceholder: "ଏକ ପାସୱାର୍ଡ ତିଆରି କରନ୍ତୁ",
        signupBtnText: "ଆକାଉଣ୍ଟ ତିଆରି କରନ୍ତୁ",
        toggleToLogin: "ପୂର୍ବରୁ ଉପଭୋକ୍ତା? ଏଠାରେ ସାଇନ୍ ଇନ୍ କରନ୍ତୁ",
        footerText1: "ଓଡ଼ିଶା କୃଷି ସହାୟକ - ତଥ୍ୟ-ଆଧାରିତ ଦୃଷ୍ଟିକୋଣ ସହିତ ଚାଷୀମାନଙ୍କୁ ସଶକ୍ତ କରିବା",
        alertEmptyFields: "ଦୟାକରି ସମସ୍ତ ଫିଲ୍ଡ ଭରନ୍ତୁ।",
        alertLoginFailed: "ଲଗଇନ ବିଫଳ ହେଲା। ଦୟାକରି ଆପଣଙ୍କ ପ୍ରମାଣପତ୍ର ଯାଞ୍ଚ କରନ୍ତୁ।",
        alertRegistrationSuccess: "ପଞ୍ଜିକରଣ ସଫଳ ହେଲା! ଆପଣ ବର୍ତ୍ତମାନ ସାଇନ୍ ଇନ୍ କରିପାରିବେ।",
        alertRegistrationFailed: "ପଞ୍ଜିକରଣ ବିଫଳ ହେଲା। ଦୟାକରି ପୁନର୍ବାର ଚେଷ୍ଟା କରନ୍ତୁ।",
    }
};

let currentLang = 'en';

// Show notification message
function showNotification(message, type = 'error') {
    const notification = document.getElementById('notification');
    notification.textContent = message;
    notification.className = `notification ${type}`;
    notification.style.display = 'block';

    setTimeout(() => {
        notification.style.display = 'none';
    }, 5000);
}

function updateUI(lang) {
    const t = translations[lang];

    // Update all text elements based on the new language
    document.title = t.title;
    document.getElementById('app-title').textContent = t.appTitle;
    document.getElementById('app-tagline').textContent = t.appTagline;
    document.getElementById('settings-btn-text').textContent = t.settingsBtn;
    document.getElementById('welcome-title').textContent = t.welcomeTitle;
    document.getElementById('welcome-text').textContent = t.welcomeText;
    document.getElementById('feature-ai-title').textContent = t.featureAITitle;
    document.getElementById('feature-ai-text').textContent = t.featureAIText;
    document.getElementById('feature-irrigation-title').textContent = t.featureIrrigationTitle;
    document.getElementById('feature-irrigation-text').textContent = t.featureIrrigationText;
    document.getElementById('feature-pest-title').textContent = t.featurePestTitle;
    document.getElementById('feature-pest-text').textContent = t.featurePestText;
    document.getElementById('login-title').textContent = t.loginTitle;
    document.getElementById('login-email-label').textContent = t.loginEmailLabel;
    document.getElementById('login-email').placeholder = t.loginEmailPlaceholder;
    document.getElementById('login-password-label').textContent = t.loginPasswordLabel;
    document.getElementById('login-password').placeholder = t.loginPasswordPlaceholder;
    document.getElementById('login-btn-text').textContent = t.loginBtnText;
    document.getElementById('show-register').textContent = t.toggleToRegister;
    document.getElementById('register-title').textContent = t.registerTitle;
    document.getElementById('signup-name-label').textContent = t.signupNameLabel;
    document.getElementById('signup-name').placeholder = t.signupNamePlaceholder;
    document.getElementById('signup-email-label').textContent = t.signupEmailLabel;
    document.getElementById('signup-email').placeholder = t.signupEmailPlaceholder;
    document.getElementById('signup-password-label').textContent = t.signupPasswordLabel;
    document.getElementById('signup-password').placeholder = t.signupPasswordPlaceholder;
    document.getElementById('signup-btn-text').textContent = t.signupBtnText;
    document.getElementById('show-login').textContent = t.toggleToLogin;
    document.getElementById('footer-text-1').textContent = t.footerText1;
}

// Language toggle functionality
const settingsBtn = document.getElementById('settings-btn');
const languageDropdown = document.getElementById('language-dropdown');
const languageOptions = document.querySelectorAll('.language-option');

settingsBtn.addEventListener('click', function() {
    languageDropdown.style.display = languageDropdown.style.display === 'block' ? 'none' : 'block';
});

languageOptions.forEach(option => {
    option.addEventListener('click', function() {
        const lang = this.getAttribute('data-lang');
        
        languageOptions.forEach(opt => opt.classList.remove('active'));
        this.classList.add('active');
        
        currentLang = lang;
        updateUI(currentLang);
        
        languageDropdown.style.display = 'none';
    });
});

document.addEventListener('click', function(event) {
    if (!settingsBtn.contains(event.target) && !languageDropdown.contains(event.target)) {
        languageDropdown.style.display = 'none';
    }
});

document.getElementById('show-register').addEventListener('click', function() {
    document.getElementById('login-card').classList.add('hidden');
    document.getElementById('register-card').classList.remove('hidden');
});

document.getElementById('show-login').addEventListener('click', function() {
    document.getElementById('register-card').classList.add('hidden');
    document.getElementById('login-card').classList.remove('hidden');
});

document.getElementById('login-btn').addEventListener('click', function() {
    const email = document.getElementById('login-email').value;
    const password = document.getElementById('login-password').value;
    
    if (!email || !password) {
        showNotification(translations[currentLang].alertEmptyFields, 'error');
        return;
    }
    
    // For demo purposes, we'll just check if fields are filled
    window.location.href = 'dashboard.html';
});

document.getElementById('signup-btn').addEventListener('click', function() {
    const name = document.getElementById('signup-name').value;
    const email = document.getElementById('signup-email').value;
    const password = document.getElementById('signup-password').value;
    
    if (!name || !email || !password) {
        showNotification(translations[currentLang].alertEmptyFields, 'error');
        return;
    }
    
    // For demo purposes, we'll just check if fields are filled
    showNotification(translations[currentLang].alertRegistrationSuccess, 'success');
    document.getElementById('show-login').click(); // Switch to login view
});

document.addEventListener('DOMContentLoaded', () => {
    updateUI(currentLang);
});

// A small fix to ensure the .hidden class is correctly applied if the CSS file loads later
const style = document.createElement('style');
style.textContent = '.hidden { display: none !important; }';
document.head.appendChild(style);